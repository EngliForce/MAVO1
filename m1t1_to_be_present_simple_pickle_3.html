<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To Be ‚Äì Typoefening (Reflex)</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fff8f0;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      background-color: #ff7043;
      padding: 1rem 0;
    }

    header img {
      width: 120px;
    }

    header h1 {
      color: white;
      margin: 0.5rem 0 0;
    }

    .game-container {
      padding: 2rem;
    }

    .btn {
      background-color: #ff7043;
      color: white;
      border: none;
      padding: 0.7rem 1.5rem;
      margin: 0.5rem;
      border-radius: 6px;
      font-size: 1.1rem;
      cursor: pointer;
    }

    .btn:hover, .btn.active {
      background-color: #e65c30;
    }

    input[type="text"] {
      padding: 0.6rem 1rem;
      font-size: 1.2rem;
      border: 2px solid #ff7043;
      border-radius: 6px;
      width: 100px;
      text-align: center;
      margin-top: 1rem;
    }

    .sentence-wrapper {
      margin: 2rem 0 1rem;
      font-size: 1.5rem;
    }

    .feedback {
      font-size: 1.1rem;
      margin-top: 1rem;
    }

    .correct {
      color: #2e7d32;
      font-weight: bold;
    }

    .incorrect {
      color: #c62828;
      font-weight: bold;
    }

    .stars {
      font-size: 2rem;
      color: gold;
    }

    .score {
      font-size: 1.2rem;
      margin-top: 1rem;
    }

    footer {
      background-color: #ffe6dc;
      padding: 1rem;
      margin-top: 2rem;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<header>
  <img src="Logo.png" alt="Engliforce Logo">
  <h1>‚úçÔ∏è Reflex ‚Äì Typ de juiste vorm van "To Be"</h1>
</header>

<div class="game-container">

  <!-- Setup -->
  <div id="setup">
    <h2>Kies modus:</h2>
    <button class="btn" id="btn-full" onclick="selectMode('full')">Volledige vormen</button>
    <button class="btn" id="btn-short" onclick="selectMode('short')">Afkortingen</button>

    <h2 style="margin-top:2rem;">Kies snelheid (level):</h2>
    <div>
      <button class="btn level-btn" onclick="selectLevel(1)">1 (langzaam)</button>
      <button class="btn level-btn" onclick="selectLevel(2)">2</button>
      <button class="btn level-btn" onclick="selectLevel(3)">3</button>
      <button class="btn level-btn" onclick="selectLevel(4)">4</button>
      <button class="btn level-btn" onclick="selectLevel(5)">5 (snel)</button>
    </div>

    <div style="margin-top: 2rem;">
      <button class="btn" id="startBtn" onclick="startGame()" disabled>‚ñ∂ Start</button>
    </div>
  </div>

  <!-- Game -->
  <div id="game" class="hidden">
    <div class="stars" id="stars">‚≠ê ‚≠ê ‚≠ê</div>
    <div class="score" id="score">Score: 0</div>

    <div class="sentence-wrapper" id="sentence">...</div>

    <input type="text" id="answerInput" placeholder="Typ hier..." autocomplete="off" />

    <div>
      <button class="btn" onclick="submitAnswer()">Controleer</button>
    </div>

    <div id="feedback" class="feedback"></div>
  </div>

  <!-- Game Over -->
  <div id="game-over" class="hidden">
    <h2>üò¢ Game Over!</h2>
    <p id="final-score"></p>
    <button class="btn" onclick="window.location.reload()">üîÑ Opnieuw</button>
  </div>
</div>

<footer>
  <p>&copy; 2025 Engliforce ‚Äì Make English Your Superpower!</p>
</footer>

<script>
  const sentences = [
    { sentence: "I ___ ready.", full: "am", short: "'m" },
    { sentence: "You ___ happy.", full: "are", short: "'re" },
    { sentence: "He ___ smart.", full: "is", short: "'s" },
    { sentence: "She ___ in the kitchen.", full: "is", short: "'s" },
    { sentence: "It ___ cold today.", full: "is", short: "'s" },
    { sentence: "We ___ excited.", full: "are", short: "'re" },
    { sentence: "They ___ friends.", full: "are", short: "'re" },
    { sentence: "Lisa ___ kind.", full: "is", short: "'s" },
    { sentence: "Tom ___ a student.", full: "is", short: "'s" },
    { sentence: "You (plural) ___ from Spain.", full: "are", short: "'re" }
  ];

  const sentenceEl = document.getElementById("sentence");
  const feedbackEl = document.getElementById("feedback");
  const answerInput = document.getElementById("answerInput");
  const starsEl = document.getElementById("stars");
  const scoreEl = document.getElementById("score");

  let mode = "";
  let levelSpeed = 0;
  let currentIndex = 0;
  let score = 0;
  let lives = 3;
  let timeoutId = null;

  let modeChosen = false;
  let levelChosen = false;

  function selectMode(selectedMode) {
    mode = selectedMode;
    modeChosen = true;
    document.getElementById("btn-full").classList.remove("active");
    document.getElementById("btn-short").classList.remove("active");
    document.getElementById(`btn-${selectedMode}`).classList.add("active");
    enableStart();
  }

  function selectLevel(level) {
    const speedMap = { 1: 10000, 2: 8000, 3: 6000, 4: 4000, 5: 2500 };
    levelSpeed = speedMap[level];
    levelChosen = true;

    document.querySelectorAll(".level-btn").forEach(btn => btn.classList.remove("active"));
    event.target.classList.add("active");
    enableStart();
  }

  function enableStart() {
    const startBtn = document.getElementById("startBtn");
    startBtn.disabled = !(modeChosen && levelChosen);
  }

  function startGame() {
    document.getElementById("setup").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");

    currentIndex = 0;
    score = 0;
    lives = 3;
    updateUI();
    nextSentence();
  }

  function nextSentence() {
    if (currentIndex >= sentences.length) return endGame();

    const current = sentences[currentIndex];
    sentenceEl.textContent = current.sentence.replace("___", "____");
    feedbackEl.textContent = "";
    answerInput.value = "";
    answerInput.focus();

    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => {
      loseLife("‚è± Tijd op!");
    }, levelSpeed);
  }

  function submitAnswer() {
    clearTimeout(timeoutId);
    const input = answerInput.value.trim().toLowerCase();
    const correct = mode === "short"
      ? sentences[currentIndex].short
      : sentences[currentIndex].full;

    if (input === correct) {
      score++;
      feedbackEl.textContent = "‚úî Correct!";
      feedbackEl.className = "feedback correct";
    } else {
      loseLife(`‚úñ Fout. Antwoord: "${correct}"`);
      return;
    }

    updateUI();
    currentIndex++;
    setTimeout(nextSentence, 1500);
  }

  function loseLife(message) {
    lives--;
    feedbackEl.textContent = message;
    feedbackEl.className = "feedback incorrect";
    updateUI();

    if (lives <= 0) {
      endGame();
    } else {
      currentIndex++;
      setTimeout(nextSentence, 1500);
    }
  }

  function updateUI() {
    scoreEl.textContent = `Score: ${score}`;
    starsEl.textContent = "‚≠ê ".repeat(lives);
  }

  function endGame() {
    clearTimeout(timeoutId);
    document.getElementById("game").classList.add("hidden");
    document.getElementById("game-over").classList.remove("hidden");
    document.getElementById("final-score").textContent = `Je eindscore: ${score} van ${sentences.length}`;
  }
</script>

</body>
</html>
